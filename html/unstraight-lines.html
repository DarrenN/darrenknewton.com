<!DOCTYPE html>
<html lang="en">
<head>
<!-- 2023-09-24 -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Unstraight Lines</title>
<meta name="description" content="
Creating unstraight lines with Racket" />
<meta name="keywords" content=" racket lewitt art metapict" />
<meta name="generator" content="Org Mode" />
<meta name="AdsBot-Google" content="noindex">
<link rel="stylesheet" type="text/css" href="css/stylesheet.css"/>
</head>
<body>
<div id="preamble" class="status">
<nav>
  <ol>
    <li class="nav-first">üìù Miscellanea ::</li>
    <li><a href="index.html">Index</a></li>
    <li><a href="about.html">About</a></li>
  </ol>
</nav>
<header>
    <h1 class="title">Unstraight Lines</h1>
    <p class="publish-date">Published <time datetime="2022-11-03">2022-11-03</time></p>
</header>
</div>
<div id="content" class="container">

<div id="outline-container-orgac9652c" class="outline-2">
<h2 id="orgac9652c">Drawing unstraight lines</h2>
<div class="outline-text-2" id="text-orgac9652c">
<p>
A collection of notes about drawing &ldquo;unstraight lines&rdquo; for use with an AxiDraw plotter. <a href="https://shihn.ca/posts/2020/roughjs-algorithms/">Prior art.</a>
</p>
</div>

<div id="outline-container-orgeaa467c" class="outline-3">
<h3 id="orgeaa467c">Finding points on a line, now</h3>
<div class="outline-text-3" id="text-orgeaa467c">
<p>
<b>Problem</b>: Give a lined defined by points <code>a</code> and <code>b</code> on a 2 dimensional plane, find arbitrary points along the line and apply &ldquo;jitter&rdquo; to the <code>y</code> axis of those points.
</p>

<p>
<a href="https://math.stackexchange.com/a/175906">This answer on MathOverflow</a> got me moving in the right direction. With some help from <a href="https://docs.racket-lang.org/metapict/index.html">MetaPict&rsquo;s</a> built-in functions. The general steps extracted from that answer boil down to:
</p>


<figure id="org8e7af06">
<img src="./img/unstraight-line-whiteboard.jpg" alt="unstraight-line-whiteboard.jpg">

</figure>

<p>
Translating that into Racket starts to look like:
</p>

<div class="org-src-container">
<pre class="src src-racket"><span style="color: #7c6f64;">;; </span><span style="color: #7c6f64;">Define the line</span>
(<span style="color: #fb4933;">define</span> <span style="color: #83a598;">a</span> (pt x0 y0)) <span style="color: #7c6f64;">; </span><span style="color: #7c6f64;">Start point on a plane</span>
(<span style="color: #fb4933;">define</span> <span style="color: #83a598;">b</span> (pt x1 y1)) <span style="color: #7c6f64;">; </span><span style="color: #7c6f64;">End point on a plane</span>

<span style="color: #7c6f64;">;; </span><span style="color: #7c6f64;">Get the distance of the two points</span>
(<span style="color: #fb4933;">define</span> <span style="color: #83a598;">d0</span> (dist a b))

<span style="color: #7c6f64;">;; </span><span style="color: #7c6f64;">The "distance space" of the line</span>
(<span style="color: #fb4933;">define</span> <span style="color: #83a598;">&#916;</span> (<span style="color: #fe8019;">range</span> <span style="color: #d3869b;">0</span> d0))

<span style="color: #7c6f64;">;; </span><span style="color: #7c6f64;">Get u, the ratio of vector over vector distance</span>
<span style="color: #7c6f64;">;; </span><span style="color: #7c6f64;">(we use this to calculate the intermediate points)</span>
<span style="color: #7c6f64;">;; </span><span style="color: #7c6f64;">v / ||v||</span>
(<span style="color: #fb4933;">define</span> <span style="color: #83a598;">u</span> (vec (<span style="color: #fe8019;">/</span> (pt-x b) d0) (<span style="color: #fe8019;">*</span> <span style="color: #d3869b;">-1</span> (<span style="color: #fe8019;">/</span> (pt-y a) d0))))

<span style="color: #7c6f64;">;; </span><span style="color: #7c6f64;">With these values we can calculate the intermediate points of the line.</span>
<span style="color: #7c6f64;">;; </span><span style="color: #7c6f64;">In MetaPict the grid is "flipped" with 0,0 at the bottom left of the grid,</span>
<span style="color: #7c6f64;">;; </span><span style="color: #7c6f64;">so we need to subtract our vector from the end point (b).</span>
(<span style="color: #fb4933;">define</span> <span style="color: #83a598;">m</span> (pt- b (vec* &#916; u)))
</pre>
</div>

<p>
To use this, we draw an arbitrary line starting at <code>(0, 170)</code> and ending at <code>(350, 0)</code> (remember that in MetaPict the origin 0,0 is at the bottom left). The <i>distance</i> between the points is <code>389.10</code>. I&rsquo;d like to get a couple of additional points at 25% and 45% of that distance respectively. Using <code>(pt- b (vec* Œî u))</code> I can calculate these to <code>(pt 262.5 42.5)</code> and  <code>(pt 192.5 76.5)</code>:
</p>


<figure id="orgd7fdea2">
<img src="./img/unstraight-line-a.svg" alt="unstraight-line-a.svg" class="org-svg">

</figure>

<p>
Let&rsquo;s try a few more:
</p>


<figure id="org555c276">
<img src="./img/unstraight-line-b.svg" alt="unstraight-line-b.svg" class="org-svg">

</figure>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="publish-date"><strong>Published</strong> 2022-11-03</p>
           <p class="modified-date"><strong>Modified</strong> 2023-09-24</p>
           <p class="copyright">&copy; Darren Newton, All Rights Reserved</p>
</div>
</body>
</html>