#+setupfile: ~/github/darrenknewton.com/template.org
#+title:     Racket / Org-Mode Test
#+date:      <2023-10-13 Fri>
#+options:   title:nil

#+BEGIN_SRC elisp :exports results :results raw
  (regenerate-preamble-postamble)
  (make-metadata
   '(:title       "Racket / Org-Mode Test"
     :description "Testing Org-Mode / Babel with Racket"
     :date        "<2023-10-13 Fri>"
     :keywords    "racket org-mode emacs"
     :type        "article"
     :url         "test-a.html"
     :img-url     "http://darrennewton.com/img/circle.png"
     :img-type    "image/png"
     :img-width   "200"
     :img-height  "200"
     :img-alt     "Image of a circle, yo"))
#+END_SRC

* Testing Racket and Org-Babel!

Mauris pharetra et ultrices neque ornare aenean. *Id eu nisl* nunc mi /ipsum faucibus vitae/. Sed faucibus turpis in eu mi bibendum. [[file+sys:index.org][Back home]]. Et malesuada fames ac turpis egestas integer eget. Et netus et malesuada fames. Tristique risus nec feugiat in. Sit amet consectetur adipiscing elit pellentesque habitant morbi. Id aliquet lectus proin nibh nisl condimentum. In pellentesque massa placerat duis ultricies lacus sed. Condimentum lacinia quis vel eros donec ac odio tempor orci. Ullamcorper dignissim cras tincidunt lobortis feugiat. Nisi vitae suscipit tellus mauris a diam maecenas. Id aliquet risus feugiat in. Quis enim lobortis scelerisque fermentum dui faucibus in ornare. Aliquam vestibulum morbi blandit cursus risus at ultrices mi tempus. Ut sem viverra aliquet eget. Consectetur adipiscing elit ut aliquam purus. Eu augue ut lectus arcu bibendum at varius vel pharetra. A pellentesque sit amet porttitor eget dolor. Ipsum a arcu cursus vitae congue mauris!

** Code block

The body is treated as a =racket= language expression, and the result is output and shit!!

#+BEGIN_SRC racket :tangle yes :eval no :exports code
  (for ([i (in-range 10)])
    (displayln (format "| ~a | ~a | ~a |" i (* 11 i) (* 23 i))))
#+END_SRC

#+BEGIN_SRC typescript :tangle yes :eval no :exports code
  function loggingIdentity<Type>(arg: Array<Type>): Array<Type> {
    console.log(arg.length); // Array has a .length, so no more error
    return arg;
  }
#+END_SRC

#+BEGIN_QUOTE
This should be a fancy <blockquote /> element in the HTML.
#+END_QUOTE

** Generate a table w Racket (no code block output)

At imperdiet dui accumsan sit amet nulla facilisi morbi. Aliquam sem et tortor consequat id. Massa enim nec dui nunc mattis enim ut tellus elementum. Ut aliquam purus sit amet luctus venenatis lectus. Risus sed vulputate odio ut. Elementum tempus egestas sed sed risus pretium. Rhoncus dolor purus non enim praesent elementum. Dapibus ultrices in iaculis nunc sed augue lacus viverra. Duis ut diam quam nulla porttitor massa id neque. Arcu cursus euismod quis viverra nibh cras. Quam adipiscing vitae proin sagittis nisl rhoncus mattis. Consequat semper viverra nam libero justo. Faucibus interdum posuere lorem ipsum dolor sit amet consectetur. Semper viverra nam libero justo laoreet.

In the org file, we have a =SRC= block of Racket code which generates the table below in org, which is converted to HTML.

*** Random figures in a table

#+BEGIN_SRC racket :noweb yes :exports results :results output raw verbatim :colnames '("a" "b" "c")
  (define (->cur n)
    (exact->inexact (/ n 100)))
  (displayln "| a | b | c |")
  (displayln "|--")
  (for ([i (in-range 10)])
    (displayln (format "| ~a | ~a | ~a |" (->cur (* 111 i)) (->cur (* 1123 i))
                       (number->string (->cur (* 2321 i))))))
#+END_SRC

#+RESULTS:
|    a |      b |      c |
|------+--------+--------|
|  0.0 |    0.0 |    0.0 |
| 1.11 |  11.23 |  23.21 |
| 2.22 |  22.46 |  46.42 |
| 3.33 |  33.69 |  69.63 |
| 4.44 |  44.92 |  92.84 |
| 5.55 |  56.15 | 116.05 |
| 6.66 |  67.38 | 139.26 |
| 7.77 |  78.61 | 162.47 |
| 8.88 |  89.84 | 185.68 |
| 9.99 | 101.07 | 208.89 |

** Generate an image

The image below is generated with some Racket code within a =#+BEGIN_SRC= block.

#+BEGIN_SRC racket :noweb yes :exports results :results file graphics :file "/Users/yuzu/github/darrenknewton.com/org/img/circle.png"
  (require 2htdp/image)
  (define canvas (rectangle 200 200 "solid" "blue"))
  (define c (circle 50 "solid" "red"))
  (save-image (overlay c canvas) "/Users/yuzu/github/darrenknewton.com/org/img/circle.png")
#+END_SRC

#+RESULTS:
[[file:/Users/yuzu/github/darrenknewton.com/org/img/circle.png]]

** Let's do some HTML!

#+BEGIN_SRC elisp :exports results :results html
  (make-photo-block
   '(("img/2023-09-22 13.10.01.jpg" "The gang" "PWL Crew 2023")
     ("img/2023-09-22 13.09.33.jpg" "The GANG!" "PWL Crew 2023+")))
#+END_SRC

#+BEGIN_EXPORT html
<b>Boo!</b>
#+END_EXPORT
